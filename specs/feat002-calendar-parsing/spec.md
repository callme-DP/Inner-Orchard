# FEAT-002-日历解析修复（Bug 归档）

## 现象
- icalBuddy 原始输出包含昨天/today 相对日期与尾部 `@url/notes:`，脚本解析大量行失败，最终仅写入 0/1 条事件。
- 日志中出现 `[skip] 无法解析行`，以及返回码警告。

## 目标
- 稳定读取本周（日/周范围）日历事件，解析覆盖相对/绝对时间格式，写入 JSON。
- 保留原始输出供追溯；解析失败行不影响整体生成，需落日志便于后续扩展。
- 目标定位：作为时间/精力管理的数据输入基础，为后续可视化/分析提供稳定源。

## 范围
- 输入：icalBuddy 文本输出（包含 yesterday/today、`@url`、`notes:`）。
- 输出：`data/calendar/week-<ISO周>.json`；原始输出保存 `data/calendar/raw/`。
- 过滤：支持日历白名单；过滤后为空时保留全部并记录。
- 验收：解析后的事件条目与原始输出行数匹配度显著提升（>90% 可解析；无法解析的行记录日志）。

## 非范围
- 不改 icalBuddy 本身；不接入其他数据源。

## 验收标准
- 能在本机运行 `scripts/fetch_calendar.py --start <周一>` 正常生成 JSON，`count` 与原始输出行数（扣除无有效时间段行）基本一致。
- 日志中 `[skip]` 行占比低（<10%），剩余原因可追溯。
- `raw/` 存在对应文本，便于回溯。
